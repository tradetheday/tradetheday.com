---
export interface Props {
  questions: {
    question: string;
    answer: string;
  }[];
  title?: string;
  inline?: boolean;
}

const { questions, title = "Frequently Asked Questions", inline = false } = Astro.props;
---

{inline ? (
  <div class="faq-section">
    <h2 class="faq-title">{title}</h2>
    <div class="faq-list">
      {questions.map(({ question, answer }) => (
        <details class="faq-item">
          <summary class="faq-question">{question}</summary>
          <div class="faq-answer">
            <p set:html={answer}></p>
          </div>
        </details>
      ))}
    </div>
  </div>
) : (
  <section class="section section-light">
    <div class="container">
      <h2 class="heading-2">{title}</h2>
      <div class="faq-list">
        {questions.map(({ question, answer }) => (
          <details class="faq-item">
            <summary class="faq-question">{question}</summary>
            <div class="faq-answer">
              <p set:html={answer}></p>
            </div>
          </details>
        ))}
      </div>
    </div>
  </section>
)}

<style>
  /* Inline FAQ styles (when inside existing container) */
  .faq-section {
    margin-bottom: var(--space-3xl);
  }

  .faq-title {
    font-size: var(--font-size-2xl);
    margin-bottom: var(--space-lg);
  }

  /* Common FAQ list styles */
  .faq-list {
    margin-top: 0;
  }

  .faq-item {
    border: 1px solid var(--gray-200);
    border-radius: var(--radius-lg);
    margin-bottom: var(--space-md);
    background: var(--white);
    overflow: hidden;
  }

  .faq-question {
    font-weight: 600;
    cursor: pointer;
    list-style: none;
    padding: var(--space-lg);
    width: 100%;
    display: flex;
    align-items: center;
    gap: var(--space-sm);
  }

  .faq-question::-webkit-details-marker {
    display: none;
  }

  .faq-question::before {
    content: "â–¶";
    display: inline-block;
    font-size: 0.75rem;
    transition: transform 0.2s;
    color: var(--brand-orange);
    flex-shrink: 0;
  }

  details[open] .faq-question::before {
    transform: rotate(90deg);
  }

  .faq-item[open] {
    border-color: var(--brand-orange);
  }

  .faq-answer {
    padding: 0 var(--space-lg) var(--space-lg) var(--space-lg);
    color: var(--gray-700);
    line-height: 1.7;
  }

  .faq-answer p {
    margin: 0;
  }

  .faq-answer a {
    color: var(--brand-orange);
  }

  /* Section wrapper styles (default non-inline mode) */
  .section-light .faq-list {
    margin-top: 2rem;
  }
</style>