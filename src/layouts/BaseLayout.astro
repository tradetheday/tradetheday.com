---
import '../styles/styles.css';
import '../styles/global.css';
import '../styles/spacing-system.css';
import '../styles/utilities.css';
import SocialProofToast from '../components/SocialProofToast.astro';
import { generateHreflangLinks, type HreflangLink } from '../utils/hreflang';

export interface Props {
  title: string;
  description?: string;
  noindex?: boolean;
  canonicalUrl?: string;
  ogImage?: string;
  ogType?: 'website' | 'article' | 'product';
  author?: string;
  publishDate?: string;
  modifiedDate?: string;
  schema?: object | object[];
  hreflang?: HreflangLink[]; // Explicit hreflang links (overrides auto-generation)
  locale?: string; // Current page locale for og:locale
}

const {
  title,
  description = "Making Trading More Accessible",
  noindex = false,
  canonicalUrl,
  ogImage = '/images/brand/tradetheday-og-default.png',
  ogType = 'website',
  author = 'TradeTheDay Editorial Team',
  publishDate,
  modifiedDate,
  schema,
  hreflang,
  locale = 'en_US'
} = Astro.props;

// Generate hreflang links - use explicit prop or auto-generate from path
const hreflangLinks = hreflang || generateHreflangLinks(Astro.url.pathname);

// Auto-generate canonical URL from current URL if not provided
const canonical = canonicalUrl || new URL(Astro.url.pathname, 'https://tradetheday.com').href;

// Site-wide data
const siteName = 'TradeTheDay';
const siteUrl = 'https://tradetheday.com';
const currentYear = new Date().getFullYear();

// Organization schema (appears on every page)
const organizationSchema = {
  "@context": "https://schema.org",
  "@type": "Organization",
  "@id": `${siteUrl}/#organization`,
  "name": siteName,
  "url": siteUrl,
  "logo": {
    "@type": "ImageObject",
    "url": `${siteUrl}/images/brand/tradetheday-logo.svg`,
    "width": 280,
    "height": 60
  },
  "description": "Your trusted partner in trading education and broker comparison. We help traders find the best brokers and develop winning strategies.",
  "foundingDate": "2020",
  "sameAs": [
    "https://twitter.com/tradetheday",
    "https://linkedin.com/company/tradetheday",
    "https://facebook.com/tradetheday"
  ],
  "contactPoint": {
    "@type": "ContactPoint",
    "contactType": "customer support",
    "email": "support@tradetheday.com"
  }
};

// Website schema (for search box and site links)
const websiteSchema = {
  "@context": "https://schema.org",
  "@type": "WebSite",
  "@id": `${siteUrl}/#website`,
  "name": siteName,
  "url": siteUrl,
  "publisher": { "@id": `${siteUrl}/#organization` },
  "potentialAction": {
    "@type": "SearchAction",
    "target": {
      "@type": "EntryPoint",
      "urlTemplate": `https://www.google.com/search?sitesearch=tradetheday.com&q={search_term_string}`
    },
    "query-input": "required name=search_term_string"
  }
};

// Combine all schemas
const allSchemas = [organizationSchema, websiteSchema];
if (schema) {
  if (Array.isArray(schema)) {
    allSchemas.push(...schema);
  } else {
    allSchemas.push(schema);
  }
}

// Derive HTML lang attribute from locale (e.g., 'en_US' → 'en', 'zh_CN' → 'zh')
const htmlLang = locale.split('_')[0];

// Smart title suffix - only add brand if title is short enough
// Google displays ~50-60 chars, so we cap at 50 before adding suffix
const titleWithBrand = title.includes('TradeTheDay') || title.length > 50
  ? title
  : `${title} | ${siteName}`;
---

<!DOCTYPE html>
<html lang={htmlLang}>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content={description}>
  {noindex && <meta name="robots" content="noindex, nofollow">}

  <!-- Canonical URL -->
  <link rel="canonical" href={canonical}>

  <!-- Hreflang Tags (Regional/Language Targeting) -->
  {hreflangLinks.length > 0 && hreflangLinks.map(link => (
    <link rel="alternate" hreflang={link.hreflang} href={link.href} />
  ))}

  <!-- Open Graph Tags -->
  <meta property="og:title" content={titleWithBrand}>
  <meta property="og:description" content={description}>
  <meta property="og:type" content={ogType}>
  <meta property="og:url" content={canonical}>
  <meta property="og:image" content={ogImage.startsWith('http') ? ogImage : `${siteUrl}${ogImage}`}>
  <meta property="og:site_name" content={siteName}>
  <meta property="og:locale" content={locale}>

  <!-- Twitter Card Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@tradetheday">
  <meta name="twitter:title" content={`${title} | ${siteName}`}>
  <meta name="twitter:description" content={description}>
  <meta name="twitter:image" content={ogImage.startsWith('http') ? ogImage : `${siteUrl}${ogImage}`}>

  <!-- Article metadata (if article type) -->
  {ogType === 'article' && publishDate && (
    <meta property="article:published_time" content={publishDate}>
  )}
  {ogType === 'article' && modifiedDate && (
    <meta property="article:modified_time" content={modifiedDate}>
  )}
  {ogType === 'article' && author && (
    <meta property="article:author" content={author}>
  )}

  <title>{titleWithBrand}</title>

  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="/images/brand/favicon.svg">
  <link rel="apple-touch-icon" href="/images/brand/apple-touch-icon.png">

  <!-- Schema.org structured data -->
  <script type="application/ld+json" set:html={JSON.stringify(allSchemas)}></script>

  <!-- Page-specific head content -->
  <slot name="head" />
</head>
<body>
  <!-- Global Header -->
  <header class="header">
    <div class="container header-container">
      <!-- Logo with Animated Candlesticks -->
      <div class="header-logo-section">
        <a href="/" class="header-logo-link" aria-label="TradeTheDay Home">
          <svg class="header-logo" width="180" height="54" viewBox="0 0 614 183" xmlns="http://www.w3.org/2000/svg">
            <g id="ttd-logo" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
              <path d="M98.2688,85.3312 L98.2688,76.7296 L105.7952,76.7296 L105.7952,64.2752 L116.368,64.2752 L116.368,76.7296 L127.12,76.7296 L127.12,85.3312 L116.368,85.3312 L116.368,105.312 C116.368,107.223476 116.711463,108.806394 117.3984,110.0608 C118.085337,111.315206 119.623455,111.9424 122.0128,111.9424 C122.729604,111.9424 123.506129,111.867734 124.3424,111.7184 C125.178671,111.569066 125.92533,111.345068 126.5824,111.0464 L126.9408,119.4688 C125.985062,119.827202 124.85014,120.110932 123.536,120.32 C122.22186,120.529068 120.967473,120.6336 119.7728,120.6336 C116.905586,120.6336 114.576009,120.230404 112.784,119.424 C110.991991,118.617596 109.573339,117.51254 108.528,116.1088 C107.482661,114.70506 106.765869,113.092276 106.3776,111.2704 C105.989331,109.448524 105.7952,107.492277 105.7952,105.4016 L105.7952,85.3312 L98.2688,85.3312 Z M133.63101,76.7296 L143.93501,76.7296 L143.93501,83.8976 L144.11421,83.8976 C145.308883,81.3887875 146.981399,79.3578744 149.13181,77.8048 C151.282221,76.2517256 153.790996,75.4752 156.65821,75.4752 C157.076345,75.4752 157.524341,75.4901332 158.00221,75.52 C158.480079,75.5498668 158.898208,75.6245327 159.25661,75.744 L159.25661,85.6 C158.539806,85.4207991 157.927546,85.3013336 157.41981,85.2416 C156.912074,85.1818664 156.419279,85.152 155.94141,85.152 C153.492331,85.152 151.521151,85.5999955 150.02781,86.496 C148.534469,87.3920045 147.369681,88.4671937 146.53341,89.7216 C145.697139,90.9760063 145.129678,92.2602601 144.83101,93.5744 C144.532342,94.8885399 144.38301,95.9338628 144.38301,96.7104 L144.38301,119.7376 L133.63101,119.7376 L133.63101,76.7296 Z M190.49722,114.272 L190.22842,114.272 C189.153215,116.183476 187.420965,117.751461 185.03162,118.976 C182.642275,120.200539 179.924435,120.8128 176.87802,120.8128 C175.145745,120.8128 173.338829,120.588802 171.45722,120.1408 C169.575611,119.692798 167.843361,118.946139 166.26042,117.9008 C164.677479,116.855461 163.363359,115.481609 162.31802,113.7792 C161.272681,112.076791 160.75002,109.971213 160.75002,107.4624 C160.75002,104.236784 161.660944,101.668276 163.48282,99.7568 C165.304696,97.8453238 167.649206,96.3818717 170.51642,95.3664 C173.383634,94.3509283 176.564403,93.678935 180.05882,93.3504 C183.553237,93.021865 186.972937,92.8576 190.31802,92.8576 L190.31802,91.7824 C190.31802,89.0943866 189.347363,87.1082731 187.40602,85.824 C185.464677,84.5397269 183.150033,83.8976 180.46202,83.8976 C178.192142,83.8976 176.011897,84.3754619 173.92122,85.3312 C171.830543,86.2869381 170.098294,87.4517265 168.72442,88.8256 L163.16922,82.2848 C165.618299,80.014922 168.440671,78.312539 171.63642,77.1776 C174.832169,76.042661 178.07267,75.4752 181.35802,75.4752 C185.180972,75.4752 188.331874,76.0127946 190.81082,77.088 C193.289766,78.1632054 195.246013,79.5669247 196.67962,81.2992 C198.113227,83.0314753 199.11375,84.9727892 199.68122,87.1232 C200.24869,89.2736108 200.53242,91.4239892 200.53242,93.5744 L200.53242,119.7376 L190.49722,119.7376 L190.49722,114.272 Z M190.31802,100.1152 L187.89882,100.1152 C186.166545,100.1152 184.344696,100.189866 182.43322,100.3392 C180.521744,100.488534 178.759628,100.817064 177.14682,101.3248 C175.534012,101.832536 174.190025,102.549329 173.11482,103.4752 C172.039615,104.401071 171.50202,105.670392 171.50202,107.2832 C171.50202,108.298672 171.726018,109.149863 172.17402,109.8368 C172.622022,110.523737 173.204416,111.076265 173.92122,111.4944 C174.638024,111.912535 175.444416,112.211199 176.34042,112.3904 C177.236424,112.569601 178.132416,112.6592 179.02842,112.6592 C182.731905,112.6592 185.539344,111.67361 187.45082,109.7024 C189.362296,107.73119 190.31802,105.043217 190.31802,101.6384 L190.31802,100.1152 Z M255.51703,119.7376 L245.30263,119.7376 L245.30263,113.2864 L245.12343,113.2864 C243.630089,115.795213 241.554377,117.70666 238.89623,119.0208 C236.238083,120.33494 233.385845,120.992 230.33943,120.992 C227.05408,120.992 224.112243,120.379739 221.51383,119.1552 C218.915417,117.930661 216.705306,116.28801 214.88343,114.2272 C213.061554,112.16639 211.657835,109.747214 210.67223,106.9696 C209.686625,104.191986 209.19383,101.220282 209.19383,98.0544 C209.19383,94.8885175 209.701558,91.9317471 210.71703,89.184 C211.732502,86.4362529 213.166087,84.0469435 215.01783,82.016 C216.869573,79.9850565 219.079684,78.3872058 221.64823,77.2224 C224.216776,76.0575942 227.024215,75.4752 230.07063,75.4752 C232.04184,75.4752 233.803956,75.6991978 235.35703,76.1472 C236.910104,76.5952022 238.269024,77.14773 239.43383,77.8048 C240.598636,78.46187 241.599159,79.1786628 242.43543,79.9552 C243.271701,80.7317372 243.958627,81.4783964 244.49623,82.1952 L244.76503,82.1952 L244.76503,52 L255.51703,52 L255.51703,119.7376 Z M220.12503,98.0544 C220.12503,99.7269417 220.378894,101.399458 220.88663,103.072 C221.394366,104.744542 222.155958,106.23786 223.17143,107.552 C224.186902,108.86614 225.471156,109.941329 227.02423,110.7776 C228.577304,111.613871 230.399153,112.032 232.48983,112.032 C234.46104,112.032 236.223156,111.628804 237.77623,110.8224 C239.329304,110.015996 240.658358,108.95574 241.76343,107.6416 C242.868502,106.32746 243.70476,104.849075 244.27223,103.2064 C244.8397,101.563725 245.12343,99.9061417 245.12343,98.2336 C245.12343,96.5610583 244.8397,94.8885417 244.27223,93.216 C243.70476,91.5434583 242.868502,90.0501399 241.76343,88.736 C240.658358,87.4218601 239.329304,86.3466708 237.77623,85.5104 C236.223156,84.6741292 234.46104,84.256 232.48983,84.256 C230.399153,84.256 228.577304,84.659196 227.02423,85.4656 C225.471156,86.272004 224.186902,87.3322601 223.17143,88.6464 C222.155958,89.9605399 221.394366,91.4389251 220.88663,93.0816 C220.378894,94.7242749 220.12503,96.3818583 220.12503,98.0544 Z M297.59924,93.9328 C297.59924,92.5589265 297.405109,91.2448063 297.01684,89.9904 C296.628571,88.7359937 296.016311,87.6309381 295.18004,86.6752 C294.343769,85.7194619 293.283513,84.9578695 291.99924,84.3904 C290.714967,83.8229305 289.206715,83.5392 287.47444,83.5392 C284.248824,83.5392 281.516051,84.509857 279.27604,86.4512 C277.036029,88.392543 275.796575,90.8863848 275.55764,93.9328 L297.59924,93.9328 Z M308.35124,98.7712 L308.35124,100.2048 C308.35124,100.682669 308.321374,101.160531 308.26164,101.6384 L275.55764,101.6384 C275.677107,103.191474 276.080303,104.610127 276.76724,105.8944 C277.454177,107.178673 278.365101,108.283729 279.50004,109.2096 C280.634979,110.135471 281.919233,110.867197 283.35284,111.4048 C284.786447,111.942403 286.279766,112.2112 287.83284,112.2112 C290.520853,112.2112 292.790697,111.718405 294.64244,110.7328 C296.494183,109.747195 298.017367,108.388275 299.21204,106.656 L306.38004,112.3904 C302.138952,118.124829 295.98648,120.992 287.92244,120.992 C284.577357,120.992 281.501121,120.469339 278.69364,119.424 C275.886159,118.378661 273.45205,116.900276 271.39124,114.9888 C269.33043,113.077324 267.717646,110.732814 266.55284,107.9552 C265.388034,105.177586 264.80564,102.026684 264.80564,98.5024 C264.80564,95.0378493 265.388034,91.8869475 266.55284,89.0496 C267.717646,86.2122525 269.315497,83.7930767 271.34644,81.792 C273.377383,79.7909233 275.781626,78.2378722 278.55924,77.1328 C281.336854,76.0277278 284.338424,75.4752 287.56404,75.4752 C290.550722,75.4752 293.313361,75.9679951 295.85204,76.9536 C298.390719,77.9392049 300.585897,79.402657 302.43764,81.344 C304.289383,83.285343 305.737901,85.7045188 306.78324,88.6016 C307.828579,91.4986812 308.35124,94.8885139 308.35124,98.7712 Z" fill="#FFFFFF" fill-rule="nonzero"></path>
              <!-- Animated Candlesticks -->
              <g class="candlesticks" transform="translate(0, 0.1376)" fill="#FF4800">
                <rect class="candle candle-1" transform="translate(59.5, 67) rotate(-270) translate(-59.5, -67)" x="-7.5" y="60" width="134" height="14"></rect>
                <rect class="candle candle-2" transform="translate(33.5, 77) rotate(-270) translate(-33.5, -77)" x="-10.5" y="70" width="88" height="14"></rect>
                <rect class="candle candle-3" transform="translate(7.5, 119) rotate(-270) translate(-7.5, -119)" x="-56" y="112" width="127" height="14"></rect>
              </g>
              <path d="M355.5448,84.1664 L344.2552,84.1664 L344.2552,106.2976 C344.2552,108.866146 344.733062,110.702928 345.6888,111.808 C346.644538,112.913072 348.167723,113.4656 350.2584,113.4656 C351.034937,113.4656 351.871196,113.376001 352.7672,113.1968 C353.663204,113.017599 354.469596,112.748802 355.1864,112.3904 L355.4552,119.2896 C354.439728,119.648002 353.319739,119.931732 352.0952,120.1408 C350.870661,120.349868 349.60134,120.4544 348.2872,120.4544 C344.285047,120.4544 341.223744,119.349344 339.1032,117.1392 C336.982656,114.929056 335.9224,111.613889 335.9224,107.1936 L335.9224,84.1664 L327.7688,84.1664 L327.7688,77.2672 L335.9224,77.2672 L335.9224,65.0816 L344.2552,65.0816 L344.2552,77.2672 L355.5448,77.2672 L355.5448,84.1664 Z M372.23261,83.7184 C373.248082,81.6277229 374.980331,79.8357408 377.42941,78.3424 C379.878489,76.8490592 382.626195,76.1024 385.67261,76.1024 C388.420357,76.1024 390.7798,76.5653287 392.75101,77.4912 C394.72222,78.4170713 396.36487,79.6565256 397.67901,81.2096 C398.99315,82.7626744 399.963807,84.5845229 400.59101,86.6752 C401.218213,88.7658771 401.53181,91.0058547 401.53181,93.3952 L401.53181,119.7376 L393.10941,119.7376 L393.10941,96.2624 C393.10941,94.5301247 392.975012,92.8874744 392.70621,91.3344 C392.437409,89.7813256 391.944614,88.4074726 391.22781,87.2128 C390.511007,86.0181274 389.54035,85.0624036 388.31581,84.3456 C387.091271,83.6287964 385.49342,83.2704 383.52221,83.2704 C380.177127,83.2704 377.429421,84.5397206 375.27901,87.0784 C373.1286,89.6170794 372.05341,93.0069121 372.05341,97.248 L372.05341,119.7376 L363.63101,119.7376 L363.63101,52 L372.05341,52 L372.05341,83.7184 L372.23261,83.7184 Z M446.085221,94.7392 C446.025487,93.0666583 445.741757,91.498674 445.234021,90.0352 C444.726285,88.571726 443.979626,87.3024054 442.994021,86.2272 C442.008416,85.1519946 440.783895,84.3008031 439.320421,83.6736 C437.856947,83.0463969 436.139631,82.7328 434.168421,82.7328 C432.376412,82.7328 430.688962,83.0463969 429.106021,83.6736 C427.523079,84.3008031 426.149226,85.1519946 424.984421,86.2272 C423.819615,87.3024054 422.863891,88.571726 422.117221,90.0352 C421.37055,91.498674 420.937488,93.0666583 420.818021,94.7392 L446.085221,94.7392 Z M454.597221,98.144 L454.597221,99.5776 C454.597221,100.055469 454.567354,100.533331 454.507621,101.0112 L420.818021,101.0112 C420.877754,102.803209 421.28095,104.490659 422.027621,106.0736 C422.774291,107.656541 423.774814,109.030394 425.029221,110.1952 C426.283627,111.360006 427.732146,112.27093 429.374821,112.928 C431.017496,113.58507 432.764678,113.9136 434.616421,113.9136 C437.483635,113.9136 439.962544,113.286406 442.053221,112.032 C444.143898,110.777594 445.786548,109.254409 446.981221,107.4624 L452.894821,112.2112 C450.624943,115.197882 447.951903,117.39306 444.875621,118.7968 C441.799339,120.20054 438.379639,120.9024 434.616421,120.9024 C431.390805,120.9024 428.404168,120.364805 425.656421,119.2896 C422.908674,118.214395 420.549231,116.706143 418.578021,114.7648 C416.606811,112.823457 415.05376,110.478947 413.918821,107.7312 C412.783882,104.983453 412.216421,101.937083 412.216421,98.592 C412.216421,95.3066502 412.768948,92.2752139 413.874021,89.4976 C414.979093,86.7199861 416.517211,84.3456099 418.488421,82.3744 C420.459631,80.4031901 422.789207,78.8650722 425.477221,77.76 C428.165234,76.6549278 431.062272,76.1024 434.168421,76.1024 C437.27457,76.1024 440.096941,76.6101283 442.635621,77.6256 C445.1743,78.6410717 447.324679,80.1045238 449.086821,82.016 C450.848963,83.9274762 452.207883,86.2421197 453.163621,88.96 C454.119359,91.6778803 454.597221,94.739183 454.597221,98.144 Z" fill="#FFFFFF" fill-rule="nonzero"></path>
              <path d="M506.6264,113.0176 C505.013592,115.586146 502.818414,117.542393 500.0408,118.8864 C497.263186,120.230407 494.351215,120.9024 491.3048,120.9024 C488.01945,120.9024 485.06268,120.320006 482.4344,119.1552 C479.80612,117.990394 477.566143,116.392543 475.7144,114.3616 C473.862657,112.330657 472.429072,109.941347 471.4136,107.1936 C470.398128,104.445853 469.8904,101.518949 469.8904,98.4128 C469.8904,95.3066511 470.398128,92.3946803 471.4136,89.6768 C472.429072,86.9589197 473.877591,84.5845435 475.7592,82.5536 C477.640809,80.5226565 479.89572,78.939739 482.524,77.8048 C485.15228,76.669861 488.049318,76.1024 491.2152,76.1024 C494.679751,76.1024 497.696254,76.834126 500.2648,78.2976 C502.833346,79.761074 504.864259,81.5381229 506.3576,83.6288 L506.5368,83.6288 L506.5368,52 L514.9592,52 L514.9592,119.7376 L506.8056,119.7376 L506.8056,113.0176 L506.6264,113.0176 Z M478.6712,98.4128 C478.6712,100.38401 478.969864,102.295457 479.5672,104.1472 C480.164536,105.998943 481.060527,107.641593 482.2552,109.0752 C483.449873,110.508807 484.913325,111.658662 486.6456,112.5248 C488.377875,113.390938 490.408788,113.824 492.7384,113.824 C494.888811,113.824 496.845058,113.405871 498.6072,112.5696 C500.369342,111.733329 501.877594,110.61334 503.132,109.2096 C504.386406,107.80586 505.357063,106.178143 506.044,104.3264 C506.730937,102.474657 507.0744,100.533343 507.0744,98.5024 C507.0744,96.4714565 506.730937,94.5301426 506.044,92.6784 C505.357063,90.8266574 504.386406,89.1840072 503.132,87.7504 C501.877594,86.3167928 500.369342,85.1818708 498.6072,84.3456 C496.845058,83.5093292 494.888811,83.0912 492.7384,83.0912 C490.408788,83.0912 488.377875,83.5093292 486.6456,84.3456 C484.913325,85.1818708 483.449873,86.3167928 482.2552,87.7504 C481.060527,89.1840072 480.164536,90.8266574 479.5672,92.6784 C478.969864,94.5301426 478.6712,96.4415901 478.6712,98.4128 Z M555.30141,92.2304 C555.30141,89.0645175 554.345687,86.7200076 552.43421,85.1968 C550.522734,83.6735924 547.984093,82.912 544.81821,82.912 C542.428865,82.912 540.173954,83.3749287 538.05341,84.3008 C535.932866,85.2266713 534.155817,86.4063928 532.72221,87.84 L528.24221,82.464 C530.332887,80.4927901 532.886462,78.939739 535.90301,77.8048 C538.919559,76.669861 542.16006,76.1024 545.62461,76.1024 C548.671026,76.1024 551.314199,76.5354623 553.55421,77.4016 C555.794222,78.2677377 557.631003,79.4474592 559.06461,80.9408 C560.498217,82.4341408 561.573407,84.1962565 562.29021,86.2272 C563.007014,88.2581435 563.36541,90.4383884 563.36541,92.768 L563.36541,111.3152 C563.36541,112.748807 563.41021,114.257059 563.49981,115.84 C563.589411,117.422941 563.753676,118.722128 563.99261,119.7376 L556.37661,119.7376 C555.898741,117.706657 555.65981,115.675743 555.65981,113.6448 L555.39101,113.6448 C553.837936,115.914678 551.881689,117.676794 549.52221,118.9312 C547.162732,120.185606 544.370226,120.8128 541.14461,120.8128 C539.472069,120.8128 537.724886,120.588802 535.90301,120.1408 C534.081135,119.692798 532.423551,118.961072 530.93021,117.9456 C529.43687,116.930128 528.197415,115.586142 527.21181,113.9136 C526.226205,112.241058 525.73341,110.180279 525.73341,107.7312 C525.73341,104.505584 526.599535,101.952009 528.33181,100.0704 C530.064086,98.1887906 532.33393,96.7552049 535.14141,95.7696 C537.948891,94.7839951 541.114726,94.1418682 544.63901,93.8432 C548.163295,93.5445318 551.717392,93.3952 555.30141,93.3952 L555.30141,92.2304 Z M553.24061,99.488 C551.149933,99.488 548.984622,99.5775991 546.74461,99.7568 C544.504599,99.9360009 542.473686,100.294397 540.65181,100.832 C538.829935,101.369603 537.321683,102.175995 536.12701,103.2512 C534.932338,104.326405 534.33501,105.759991 534.33501,107.552 C534.33501,108.806406 534.588874,109.851729 535.09661,110.688 C535.604346,111.524271 536.276339,112.211197 537.11261,112.7488 C537.948881,113.286403 538.874739,113.659732 539.89021,113.8688 C540.905682,114.077868 541.951005,114.1824 543.02621,114.1824 C546.96863,114.1824 550.000066,113.002678 552.12061,110.6432 C554.241154,108.283722 555.30141,105.312018 555.30141,101.728 L555.30141,99.488 L553.24061,99.488 Z M592.776421,110.5984 L592.955621,110.5984 L604.693221,77.2672 L613.653221,77.2672 L593.045221,129.7728 C592.328417,131.564809 591.551891,133.16266 590.715621,134.5664 C589.87935,135.97014 588.89376,137.164795 587.758821,138.1504 C586.623882,139.136005 585.294828,139.897597 583.771621,140.4352 C582.248413,140.972803 580.441498,141.2416 578.350821,141.2416 C577.454816,141.2416 576.543892,141.1968 575.618021,141.1072 C574.692149,141.0176 573.751359,140.853335 572.795621,140.6144 L573.602021,133.1776 C575.035628,133.655469 576.439347,133.8944 577.813221,133.8944 C580.023365,133.8944 581.666015,133.282139 582.741221,132.0576 C583.816426,130.833061 584.802016,129.085878 585.698021,126.816 L588.386021,119.7376 L570.197221,77.2672 L579.605221,77.2672 L592.776421,110.5984 Z" fill="#FFFFFF" fill-rule="nonzero"></path>
            </g>
          </svg>
        </a>
      </div>

      <!-- Navigation -->
      <nav class="header-nav" id="headerNav">
        <!-- Desktop Nav Links -->
        <div class="header-nav-links">
          <a href="/bonus-codes" class="header-nav-link">Bonuses</a>
          <a href="/brokers" class="header-nav-link">Brokers</a>
          <a href="/exchanges" class="header-nav-link">Exchanges</a>
          <a href="/tools" class="header-nav-link">Tools</a>
        </div>

        <!-- Search Trigger -->
        <button class="search-trigger" id="searchTrigger" aria-label="Open search" aria-expanded="false" aria-controls="searchOverlay">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true" focusable="false">
            <circle cx="11" cy="11" r="8"></circle>
            <path d="m21 21-4.35-4.35"></path>
          </svg>
        </button>

        <!-- Desktop CTA -->
        <a href="/find-broker" class="btn btn-primary btn-sm header-cta-btn header-cta-desktop">
          Find Broker
        </a>

        <!-- Mobile Menu Toggle -->
        <button class="mobile-menu-toggle" id="mobileMenuToggle" aria-label="Toggle menu" aria-expanded="false">
          <span class="hamburger-line"></span>
          <span class="hamburger-line"></span>
          <span class="hamburger-line"></span>
        </button>
      </nav>

      <!-- Mobile Menu Dropdown -->
      <div class="mobile-menu" id="mobileMenu" aria-hidden="true">
        <a href="/bonus-codes" class="mobile-menu-link">Bonuses</a>
        <a href="/brokers" class="mobile-menu-link">Brokers</a>
        <a href="/exchanges" class="mobile-menu-link">Exchanges</a>
        <a href="/tools" class="mobile-menu-link">Tools</a>
        <a href="/find-broker" class="mobile-menu-cta">Find My Perfect Broker</a>
      </div>
    </div>
  </header>

  <!-- Mobile Menu Script -->
  <script is:inline>
    document.addEventListener('DOMContentLoaded', function() {
      var toggle = document.getElementById('mobileMenuToggle');
      var menu = document.getElementById('mobileMenu');

      if (toggle && menu) {
        toggle.onclick = function(e) {
          e.preventDefault();
          e.stopPropagation();

          if (menu.classList.contains('is-active')) {
            toggle.classList.remove('is-active');
            menu.classList.remove('is-active');
          } else {
            toggle.classList.add('is-active');
            menu.classList.add('is-active');
          }
        };

        document.addEventListener('click', function(e) {
          if (menu.classList.contains('is-active') && !menu.contains(e.target) && !toggle.contains(e.target)) {
            toggle.classList.remove('is-active');
            menu.classList.remove('is-active');
          }
        });

        document.addEventListener('keydown', function(e) {
          if (e.key === 'Escape' && menu.classList.contains('is-active')) {
            toggle.classList.remove('is-active');
            menu.classList.remove('is-active');
          }
        });
      }
    });
  </script>

  <!-- Full-Width Search Overlay -->
  <div class="search-overlay" id="searchOverlay" role="dialog" aria-label="Search" aria-modal="true" aria-hidden="true">
    <div class="search-overlay-inner">
      <form action="https://www.google.com/search" method="get" target="_blank" class="search-overlay-form" role="search">
        <input type="hidden" name="sitesearch" value="tradetheday.com">
        <div class="search-overlay-input-wrap">
          <svg class="search-overlay-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true" focusable="false">
            <circle cx="11" cy="11" r="8"></circle>
            <path d="m21 21-4.35-4.35"></path>
          </svg>
          <input type="text" name="q" placeholder="Search..." class="search-overlay-input" id="searchOverlayInput" autocomplete="off" aria-label="Search query">
          <button type="submit" class="btn btn-primary">Go</button>
        </div>
      </form>
      <div class="search-overlay-suggestions">
        <a href="/bonus-codes/avatrade-partner-code" class="search-suggestion-tag">AvaTrade Code</a>
        <a href="/brokers" class="search-suggestion-tag">Brokers</a>
        <a href="/find-broker" class="search-suggestion-tag">Find Broker</a>
      </div>
      <button type="button" class="search-overlay-close" id="searchClose" aria-label="Close search">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true" focusable="false">
          <path d="M18 6L6 18M6 6l12 12"></path>
        </svg>
      </button>
    </div>
  </div>

  <!-- Breadcrumb Section -->
  <slot name="breadcrumb" />

  <main>
    <slot />
  </main>

  <!-- Global Footer -->
  <footer class="footer">
    <div class="container">
      <!-- Main Footer Content -->
      <div class="footer-content">
        <!-- Brand Section -->
        <div class="footer-brand">
          <img src="/images/brand/tradetheday-logo.svg" alt="TradeTheDay" class="footer-logo" width="180" height="40">
          <p class="body-sm footer-description">
            Your trusted partner in trading education and broker comparison. We help traders find the best brokers and develop winning strategies.
          </p>
          <div class="footer-badges">
            <span class="badge-text"><svg width="14" height="14" viewBox="0 0 20 20" fill="currentColor" class="footer-badge-icon" aria-hidden="true"><path fill-rule="evenodd" d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z" clip-rule="evenodd"/></svg> SSL Secured</span>
            <span class="badge-text"><svg width="14" height="14" viewBox="0 0 20 20" fill="currentColor" class="footer-badge-icon" aria-hidden="true"><path fill-rule="evenodd" d="M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg> Verified Reviews</span>
          </div>
          <div class="footer-social">
            <span class="body-xs footer-social-label">Follow Us:</span>
            <a href="https://twitter.com/tradetheday" class="footer-social-link" aria-label="Follow us on X (formerly Twitter)" target="_blank" rel="noopener">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" focusable="false">
                <path d="M18.901 1.153h3.68l-8.04 9.19L24 22.846h-7.406l-5.8-7.584-6.638 7.584H.474l8.6-9.83L0 1.154h7.594l5.243 6.932L18.901 1.153ZM17.61 20.644h2.039L6.486 3.24H4.298L17.61 20.644Z"/>
              </svg>
            </a>
            <a href="https://linkedin.com/company/tradetheday" class="footer-social-link" aria-label="Follow us on LinkedIn" target="_blank" rel="noopener">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" focusable="false">
                <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.062 2.062 0 01-2.063-2.065 2.064 2.064 0 112.063 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
              </svg>
            </a>
            <a href="https://facebook.com/tradetheday" class="footer-social-link" aria-label="Follow us on Facebook" target="_blank" rel="noopener">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" focusable="false">
                <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
              </svg>
            </a>
            <a href="https://instagram.com/tradetheday" class="footer-social-link" aria-label="Follow us on Instagram" target="_blank" rel="noopener">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" focusable="false">
                <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
              </svg>
            </a>
          </div>
        </div>

        <!-- Navigation Links -->
        <div class="footer-links">
          <div class="footer-column">
            <h3 class="heading-4 footer-heading">Quick Links</h3>
            <ul class="footer-nav">
              <li><a href="/brokers" class="footer-link">Best Brokers</a></li>
              <li><a href="/guides/how-to-trade-gold" class="footer-link">Trade Gold</a></li>
              <li><a href="/trade/bitcoin" class="footer-link">Trade Bitcoin</a></li>
              <li><a href="/guides/beginners-start-here" class="footer-link">Beginner's Guide</a></li>
            </ul>
          </div>

          <div class="footer-column footer-column-mobile-hidden">
            <h3 class="heading-4 footer-heading">Resources</h3>
            <ul class="footer-nav">
              <li><a href="/find-broker" class="footer-link">Find Your Broker</a></li>
              <li><a href="/bonus-codes" class="footer-link">Bonus Codes</a></li>
              <li><a href="/events" class="footer-link">Market Events</a></li>
              <li><a href="/opportunities" class="footer-link">Trading Opportunities</a></li>
            </ul>
          </div>

          <div class="footer-column footer-column-mobile-hidden">
            <h3 class="heading-4 footer-heading">Trust & Policies</h3>
            <ul class="footer-nav">
              <li><a href="/privacy" class="footer-link">Privacy Policy</a></li>
              <li><a href="/terms" class="footer-link">Terms of Service</a></li>
              <li><a href="/disclaimer" class="footer-link">Risk Disclaimer</a></li>
              <li><a href="/contact" class="footer-link">Contact Us</a></li>
            </ul>
          </div>
        </div>
      </div>

      <!-- Risk Warning -->
      <div class="footer-warnings" data-nosnippet>
        <div class="callout callout-warning">
          <p class="body-sm">
            <strong><svg width="14" height="14" viewBox="0 0 20 20" fill="currentColor" class="footer-warning-icon" aria-hidden="true"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/></svg> Risk Warning:</strong> Trading and investing in derivatives, foreign exchange (forex), cryptocurrencies, and contracts for difference (CFDs) involves significant risk and may not be suitable for all investors. You can lose all or more than your invested capital. Trade The Day provides general educational content only and does not offer personalised financial, investment, tax, or legal advice. <a href="/risk-disclaimer" class="brand-link">Read full risk disclosure.</a>
          </p>
        </div>

        <div class="footer-disclosure">
          <p class="body-sm">
            <strong>Advertiser Disclosure:</strong> Trade The Day may receive commissions from brokers and exchanges if you sign up through our links. This does not affect the independence of our reviews. <a href="/advertiser-disclosure" class="footer-disclosure-link">Read our advertiser disclosure</a>.
          </p>
        </div>
      </div>

      <!-- Footer Bottom -->
      <div class="footer-bottom" data-nosnippet>
        <p class="body-sm footer-copyright">
          © {currentYear} TradeTheDay. All rights reserved. | Trading involves risk.
        </p>
        <p class="body-xs footer-disclaimer">
          We may receive compensation from the brokers we feature. This does not impact our reviews or rankings.
        </p>
      </div>
    </div>
  </footer>


  <!-- Lazy Loading Enhancement -->
  <script src="/js/lazy-load.js" is:inline></script>

  <!-- Date Updater -->
  <script src="/js/date-updater.js" is:inline></script>

  <!-- Back to Top Button -->
  <button class="back-to-top" id="backToTop" aria-label="Back to top">↑</button>
  <script src="/js/base-layout.js" is:inline></script>

  <!-- Social Proof Toast (Cialdini) -->
  <SocialProofToast delay={8000} interval={30000} duration={7000} />
</body>
</html>

<style is:global>
  @import '../styles/global.css';
</style>
